<!-- featured tips and info -->
<div class="container-fluid">
	<div class="row justify-content-center">
	  <h3 class="tb-box-h3">{{ section.settings.hp_articles_header }}</h3>
	</div>
</div>



{% assign featuredBlogs = 'how-to,news,welding' | split:',' %}

{% comment %}
Set the featuredArticles variable to false by default.
{% endcomment %}
{% assign featuredArticles = false %}

{% comment %}
Grab the last 50 (default) articles from each Blog. Add the articles to the featureArticles variable.
{% endcomment %}
{% for featuredBlog in featuredBlogs %}
	{% if blogs[featuredBlog].articles %}
		{% if featuredArticles %}
			{% assign featuredArticles = featuredArticles | concat:blogs[featuredBlog].articles %}
		{% else %}
			{% assign featuredArticles = blogs[featuredBlog].articles %}
		{% endif %}
	{% endif %}
{% endfor %}

{% comment %}
If featuredArticles is not false we should have articles to show.
{% endcomment %}
<div class="container">
	<div class="row">
	{% if featuredArticles %}
		{% assign featuredArticles = featuredArticles | sort:'published_at' | reverse %}

		{% comment %}
		Now a quick example of showing the latest 2 articles from our master article list
		{% endcomment %}

		{% for article in featuredArticles limit:2 %}
			<div class="col-md-6 hp-article-img">
				<div class="hp-article-color">
						<img class="img-fluid" src="{{ article.image.src | img_url: '500x300', crop: 'center' }}">
						<div class="hp-article-text">
							<div class="hp-article-category">
								{% assign article_cat_hand = article.handle | split:'/' %}
								{% for blog_cat in featuredBlogs %}
									{% if blogs[blog_cat].handle == article_cat_hand[0] %}
									<a href="{{ blogs[blog_cat].url }}">
										<p class="hp-article-category-text">{{ blogs[blog_cat].title }}</p>
									</a>
									{% endif %}
								{% endfor %}
							</div>
							<div class="hp-article-txt-block">
								<a href="{{ article.url }}">
									<h4 class="hp-article_title">{{ article.title | truncate: 70 }}</h4>
								</a>
									<p><i class="fas fa-clock"></i> {{ article.published_at | date: "%B %d, %Y" }}</p>
							</div>
						</div>
				</div>
			</div>
		{% endfor %}

	{% endif %}
	</div>
	<div class="row hp-article-button">
		<div class="col-md-12 text-center">
			<a href="{{ section.settings.hp_articles_btn_url }}" class="btn btn-primary tb-button">{{ section.settings.hp_articles_btn_text }}</a>
		</div>
	</div>
</div>



{% schema %}
{
	"name": "Home Page Articles",
	"settings": [
		{
			"type": "text",
			"id": "hp_articles_header",
			"label": "Home Aritcles Header"
		},
		{
			"type": "text",
			"id": "hp_articles_btn_text",
			"label": "Home Aritcles Button Text"
		},
		{
			"type": "url",
			"id": "hp_articles_btn_url",
			"label": "Home Articles Button URL"
		}
	]
}
{% endschema %}